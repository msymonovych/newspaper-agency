{% extends 'base.html' %}

{% load query_transform %}

{% block content %}

<div class="row">
  <div class="col-sm-11">
    {% block search %}
      {% include "includes/search.html" %}
    {% endblock %}
  </div>
  <div class="col-sm-1">
    {% if user.is_authenticated %}
    <a href="{% url 'newspaper:news-create' %}" class="btn btn-primary text">Create</a>
    {% endif %}
  </div>
</div>
  <div class="row liqu">

<ul class="list-group col-sm-2">
  {% for topic in topic_list %}
    <a href="?{% query_transform request topic=topic.name %}">
      <li class="list-group-item">
        {{ topic.name }}
      </li>
    </a>
  {% endfor %}
</ul>
  
<br>
  
<ul class="col-sm-10">
{% if news_list %}
  {% for news in news_list %}
  <a class="text-decoration-none" href="{% url 'newspaper:news-detail' pk=news.id%}">
    <div class="card mb-2 text-body">
    
      <div class="card-header">
        <div class="row">
          <i class="col-sm-10">{{ news.title }}</i>
          <i class="col-sm-2 text-secondary">{{ news.publish_date }}</i>
        </div>

      </div>
      
      <div class="card-body">
        <p class="card-text">{{ news.content|truncatewords:50 }}</p>
      </div>
    
      <div class="card-footer text-secondary">
        <strong class="">Published by</strong>
        {% for publisher in news.publishers.all %}
          {{ publisher.username }}
        {% endfor %}
      </div>
    </div>
  </a>
  {% endfor %}
{% else %}
  <p>No news found</p>
{% endif %}
</ul>
</div>
{% endblock %}
